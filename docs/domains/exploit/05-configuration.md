# Exploit Configuration

Configure exploit module behavior.

## Configuration File

```yaml
# .redblue.yaml
exploit:
  # Default listener port
  # Default: 4444
  default_port: 4444

  # Default shell type
  # Values: "bash", "python", "powershell", etc.
  # Default: "bash"
  default_shell: bash

  # Show ethical warning
  # Default: true
  show_warning: true

  # Output format
  # Values: "text", "json"
  # Default: "text"
  output_format: text
```

## Environment Variables

```bash
# Default port
export REDBLUE_EXPLOIT_DEFAULT_PORT=4444

# Default shell
export REDBLUE_EXPLOIT_DEFAULT_SHELL=python

# Show warning
export REDBLUE_EXPLOIT_SHOW_WARNING=true
```

## Port Configuration

### Default Listener Port

```yaml
# .redblue.yaml
exploit:
  default_port: 4444
```

### Common Ports

| Port | Use Case |
|------|----------|
| 4444 | Default, testing |
| 443 | HTTPS (often allowed) |
| 80 | HTTP (often allowed) |
| 8080 | Alt HTTP |
| 53 | DNS (may bypass firewall) |

## Shell Configuration

### Default Shell Type

```yaml
# .redblue.yaml
exploit:
  default_shell: python  # Most reliable
```

### Recommendations

| Situation | Shell Type |
|-----------|------------|
| Linux target | python |
| Windows target | powershell |
| Web server | php |
| Minimal system | nc or bash |
| Encrypted needed | socat --ssl |

## Warning Configuration

### Ethical Warning

```yaml
# .redblue.yaml
exploit:
  show_warning: true  # Recommended
```

When enabled, shows:

```
AUTHORIZED USE ONLY

  Use ONLY for:
  • Authorized penetration testing engagements
  • CTF competitions
  • Bug bounty programs (within scope)
  • Your own systems for security testing
  • Educational and research purposes

  Unauthorized access is ILLEGAL.
```

### Disable Warning (Not Recommended)

```yaml
# .redblue.yaml
exploit:
  show_warning: false
```

## Profile Examples

### CTF Competition

```yaml
# .redblue.yaml
exploit:
  default_port: 4444
  default_shell: python
  show_warning: false
  output_format: text
```

### Professional Pentest

```yaml
# .redblue.yaml
exploit:
  default_port: 443
  default_shell: powershell
  show_warning: true
  output_format: json
```

### Red Team

```yaml
# .redblue.yaml
exploit:
  default_port: 443
  default_shell: python
  show_warning: true
  output_format: text
```

### Bug Bounty

```yaml
# .redblue.yaml
exploit:
  default_port: 443
  default_shell: bash
  show_warning: true
  output_format: text
```

## Configuration Precedence

Configuration applies in this order (later overrides earlier):

1. Built-in defaults
2. Global config (`~/.config/redblue/config.yaml`)
3. Project config (`./.redblue.yaml`)
4. Environment variables (`REDBLUE_EXPLOIT_*`)
5. Command-line flags (`--lport`, `--type`, etc.)

```bash
# Config sets port=4444
# Flag overrides to 443
rb exploit payload shell --lhost 10.10.10.10 --lport 443
# Result: port = 443
```

## Security Considerations

### Always Verify Authorization

- Written permission required
- Scope clearly defined
- Emergency contacts available

### Clean Up After Testing

- Remove all persistence mechanisms
- Delete uploaded files
- Document all changes

### Log Your Actions

```bash
# Record session
script exploit-session-$(date +%Y%m%d).log
```

## Next Steps

- [Privilege Escalation](/domains/exploit/01-privesc.md) - Find escalation vectors
- [Reverse Shells](/domains/exploit/02-shells.md) - Generate payloads
- [Lateral Movement](/domains/exploit/03-lateral.md) - Movement techniques
- [Persistence](/domains/exploit/04-persist.md) - Maintain access
